import { clsx } from 'clsx';

type Severity = 'critical' | 'high' | 'medium' | 'low';
type BadgeSize = 'sm' | 'md' | 'lg';

interface SeverityBadgeProps {
  severity: Severity;
  size?: BadgeSize;
}

/**
 * 취약점 심각도 배지 컴포넌트
 * 시스템 설계 기준 심각도 색상 매핑:
 *   - Critical: 빨간 계열 (즉각 대응 필요)
 *   - High: 주황 계열
 *   - Medium: 노란 계열
 *   - Low: 파란 계열
 */
export function SeverityBadge({ severity, size = 'md' }: SeverityBadgeProps) {
  // 심각도별 스타일 설정
  const severityStyleMap: Record<
    Severity,
    { label: string; textColor: string; bgColor: string; borderColor: string }
  > = {
    critical: {
      label: 'Critical',
      textColor: 'text-danger-300',
      bgColor: 'bg-danger-950',
      borderColor: 'border-danger-800',
    },
    high: {
      label: 'High',
      textColor: 'text-orange-300',
      bgColor: 'bg-orange-950',
      borderColor: 'border-orange-800',
    },
    medium: {
      label: 'Medium',
      textColor: 'text-warning-300',
      bgColor: 'bg-warning-950',
      borderColor: 'border-warning-800',
    },
    low: {
      label: 'Low',
      textColor: 'text-blue-300',
      bgColor: 'bg-blue-950',
      borderColor: 'border-blue-800',
    },
  };

  // 크기별 패딩/폰트 설정
  const sizeStyleMap: Record<BadgeSize, string> = {
    sm: 'px-1.5 py-0.5 text-xs',
    md: 'px-2 py-0.5 text-xs',
    lg: 'px-2.5 py-1 text-sm',
  };

  const style = severityStyleMap[severity];

  return (
    <span
      className={clsx(
        'inline-flex items-center font-medium rounded border shrink-0',
        style.textColor,
        style.bgColor,
        style.borderColor,
        sizeStyleMap[size],
      )}
    >
      {style.label}
    </span>
  );
}
