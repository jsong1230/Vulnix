# Vulnix -- PRD

## 1. 프로젝트 개요

### 1-1. 배경

기존 SAST 도구(Veracode, Checkmarx, Fortify)는 연 수천만~수억원의 라이선스 비용에도 두 가지 결정적 한계를 가진다.

1. 취약점을 **발견만** 하고 수정 방법은 제공하지 않아, 보안팀 -> 개발팀 -> 컨설턴트로 이어지는 3단계 비효율이 발생한다.
2. 오탐(false positive)이 전체 알림의 30~60%에 달해 개발자들이 경고를 무시하게 된다.

결과적으로 취약점 발견에서 패치 완료까지 평균 60~90일이 소요되며, 그 사이 실제 침해가 발생한다.

LLM의 코드 이해 능력이 시니어 개발자 수준에 도달한 지금, **탐지와 패치를 하나의 에이전트로 묶어** 이 문제를 해결한다.

### 1-2. 목표

| 구분 | 목표 | 기간 |
|------|------|------|
| 사업 | 첫 유료 고객 10사 확보 / ARR 3억원 | 출시 후 12개월 |
| 제품 | 탐지 정확도 90% 이상 / 자동 패치 승인율 60% 이상 | v1.0 |
| PoC | GitHub 연동 데모 완성 / 파일럿 고객 3사 확보 | 3개월 |

### 1-3. 대상 사용자

| 구분 | 페르소나 | 핵심 고통 |
|------|----------|-----------|
| Primary | 개발팀 리드 / 시니어 개발자 | 보안팀 요청으로 취약점 수정에 과도한 시간 소요 |
| Secondary | 보안팀 / CISO | 오탐이 많아 신뢰도 하락, 개발팀과 마찰 |
| Economic Buyer | CTO / 기술임원 | 보안 인증(CSAP, ISO 27001) 준비 비용 과다 |

### 1-4. 핵심 가치

1. **탐지가 아닌 패치까지** -- 취약점 발견 -> 패치 PR 생성을 수분 내 완료
2. **한국 시장 특화** -- CSAP, ISMS 등 국내 인증 대응 리포트 자동 생성
3. **압도적 가격** -- 기존 대비 1/5 수준의 비용

---

## 2. 핵심 기능 요약

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| F-01 | 저장소 연동 및 스캔 트리거 | GitHub App 설치, Webhook 기반 자동 스캔, 수동/스케줄 실행 | Critical |
| F-02 | 취약점 탐지 엔진 (Python) | Semgrep 룰 기반 1차 AST 분석 + LLM 2차 컨텍스트 분석 (Python, SQL Injection/XSS/Hardcoded Credentials) | Critical |
| F-03 | 자동 패치 PR 생성 | 취약점별 LLM 패치 코드 생성, 코드 스타일 유지, 설명 포함 PR 자동 제출 | Critical |
| F-04 | 스캔 결과 API 및 기본 UI | 스캔 결과 조회 API, 취약점 목록/상세 확인 기본 웹 화면 | High |
| F-05 | 다국어 탐지 엔진 확장 | JS/TS, Java, Go 언어 지원 추가, OWASP Top 10 전체 카테고리 탐지 | High |
| F-06 | 오탐 관리 | 개발자 오탐 마킹 -> 패턴 학습, 팀 단위 규칙 공유, 오탐율 트래킹 | High |
| F-07 | 대시보드 | 저장소별/팀별 보안 점수, 취약점 추이 그래프, 취약점 관리 화면 | High |
| F-08 | Slack/Teams 알림 연동 | 취약점 탐지 시 담당자 멘션, 주간 보안 리포트 자동 발송 | Medium |
| F-09 | GitLab/Bitbucket 연동 | GitLab Integration, Bitbucket App 형태의 저장소 연동 지원 | High |
| F-10 | CISO 리포트 및 인증 증적 | 경영진 리포트(PDF) 자동 생성, CSAP/ISO 27001/ISMS 증적 자료 출력 | High |
| F-11 | IDE 플러그인 (VS Code) | 코드 작성 중 실시간 취약점 하이라이팅, 인라인 패치 제안 | Medium |

---

## 3. 비기능 요구사항

### 성능

| 항목 | 요구사항 |
|------|----------|
| 스캔 속도 | 10만 라인 코드베이스 기준 5분 내 완료 |
| 패치 생성 속도 | 취약점 1건당 PR 생성 30초 이내 |
| 탐지 정확도 | 90% 이상 (PoC 기준 80% 이상) |
| 오탐율 | 10% 이하 |

### 보안

- 코드 데이터 전송 시 TLS 암호화
- 고객 코드를 LLM 학습 데이터로 사용하지 않음 (계약서 명시)
- 스캔 처리 후 고객 코드 즉시 삭제 (저장 안 함)
- 엔터프라이즈는 VPC 내 프라이빗 배포 옵션 제공

### 확장성

- 저장소 1,000개 동시 처리 가능 구조
- SLA 99.5% uptime

### 규정 준수

- 고객 코드 저장 최소화 / 처리 후 삭제 옵션 제공
- 데이터 레지던시 요구사항 대응 (금융권 국내 서버 검토)

---

## 4. 기술 스택

| 레이어 | 기술 |
|--------|------|
| 1차 탐지 엔진 | Semgrep (오픈소스 룰 기반 SAST) |
| LLM | Claude API (claude-sonnet) |
| 백엔드 | Python (FastAPI) |
| 저장소 연동 | GitHub App API, GitLab API, Bitbucket API |
| 데이터베이스 | PostgreSQL (취약점 히스토리) + Redis (스캔 큐) |
| 프론트엔드 | Next.js |
| 인프라 | AWS (ECS Fargate) |
| 취약점 DB | NVD (CVE), OWASP, Semgrep 룰셋 |

**핵심 기술 의사결정**: Semgrep + LLM 하이브리드 구조. Semgrep이 빠르게 후보를 추려주고, LLM이 컨텍스트를 이해해 최종 판단 + 패치 생성을 담당한다. Semgrep만으로는 오탐이 많고, LLM만으로는 속도/비용 문제가 크다.

---

## 5. 범위 외 (Out of Scope)

v1.0에서 다루지 않는 항목:

- DAST(동적 분석), IAST(런타임 분석)
- 의존성 패키지 취약점 분석 (SCA) -- v2 검토
- C/C++, C#, Swift 등 추가 언어 -- v2 검토
- 온프레미스 설치형 -- 엔터프라이즈 플랜에서 별도 계약

---

## 6. PoC 목표 및 성공 기준

### 6-1. PoC 범위 (의도적으로 좁게)

| 항목 | PoC 범위 |
|------|----------|
| 언어 | Python만 |
| 취약점 | SQL Injection, XSS, Hardcoded Credentials (OWASP Top 10 중 3가지) |
| 저장소 | GitHub만 |
| 패치 | 자동 PR 생성 (리뷰 및 승인은 사람) |

### 6-2. 성공 기준 (Go / No-Go)

| 기준 | 목표값 |
|------|--------|
| 탐지 정확도 | 80% 이상 |
| 패치 PR 승인율 | 40% 이상 |
| 파일럿 고객 NPS | 30 이상 |
| 유료 전환 의향 | 파일럿 3사 중 2사 이상 |

---

## 7. 리스크 및 대응

| 리스크 | 가능성 | 영향 | 대응 방안 |
|--------|--------|------|-----------|
| LLM이 잘못된 패치 생성 | 높음 | 높음 | 패치 PR은 항상 사람 리뷰 필수, 자동 머지 없음 명시 |
| 고객 코드 유출 우려 | 중간 | 매우 높음 | 코드 즉시 삭제 정책, SOC 2 인증 로드맵 수립 |
| GitHub Advanced Security 무료화 | 낮음 | 중간 | 패치 자동화 + 한국 인증 특화로 차별화 유지 |
| API 비용 과다 | 중간 | 중간 | 1차 룰 기반으로 LLM 호출 최소화, 캐싱 전략 |
| 오탐율 높아 개발자 외면 | 중간 | 높음 | 오탐 피드백 루프 설계, 초반엔 오탐 낮은 유형만 탐지 |
